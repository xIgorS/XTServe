@inherits LayoutComponentBase

<FluentLayout>
    <FluentHeader Style="background: #0078d4; color: white; padding: 0 24px;">
        <FluentStack Orientation="Orientation.Horizontal" VerticalAlignment="VerticalAlignment.Center" Style="width: 100%; height: 56px;">
            <FluentLabel Typo="Typography.H6" Style="color: white; font-weight: 600;">XTWeb - Database Statistics</FluentLabel>
            <FluentSpacer />
            <FluentLabel Typo="Typography.Body" Style="color: white;">@userName</FluentLabel>
        </FluentStack>
    </FluentHeader>
    <FluentStack Orientation="Orientation.Horizontal" Style="width: 100%; height: calc(100vh - 56px);">
        <div style="width: 300px; background: #f3f2f1; border-right: 1px solid #e1dfdd; overflow-y: auto; padding: 16px 0;">
            <NavMenu />
        </div>
        <FluentBodyContent Style="padding: 24px; flex: 1; overflow-y: auto; background: #faf9f8;">
            @Body
        </FluentBodyContent>
    </FluentStack>
</FluentLayout>

@code {
    private string userName = "";

    [CascadingParameter]
    private Task<AuthenticationState>? AuthenticationStateTask { get; set; }

    protected override async Task OnInitializedAsync()
    {
        if (AuthenticationStateTask != null)
        {
            var authState = await AuthenticationStateTask;
            userName = authState.User?.Identity?.Name ?? "Anonymous";
        }
    }
}
