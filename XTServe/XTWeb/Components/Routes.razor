@using Microsoft.FluentUI.AspNetCore.Components.Icons

<FluentDesignTheme StorageName="theme" />

<CascadingAuthenticationState>
    <Router AppAssembly="typeof(Program).Assembly" NotFoundPage="typeof(Pages.NotFound)">
        <Found Context="routeData">
            <ErrorBoundary>
                <ChildContent>
                    <RouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)" />
                    <FocusOnNavigate RouteData="routeData" Selector="h1" />
                </ChildContent>
                <ErrorContent Context="exception">
                    <FluentStack Orientation="Orientation.Vertical" Style="padding: 20px; margin: 20px;">
                        <FluentMessageBar Intent="MessageIntent.Error" Title="An error occurred">
                            <strong>Error:</strong> @exception.Message
                        </FluentMessageBar>
                        <FluentAccordion>
                            <FluentAccordionItem Heading="Show details">
                                <pre style="background: #fff; padding: 10px; overflow: auto; margin-top: 10px;">@exception.ToString()</pre>
                            </FluentAccordionItem>
                        </FluentAccordion>
                        <FluentStack Orientation="Orientation.Horizontal" Style="margin-top: 20px;">
                            <FluentButton Appearance="Appearance.Accent" OnClick="@NavigateToHome">
                                🏠 Go to Home
                            </FluentButton>
                            <FluentButton Appearance="Appearance.Neutral" OnClick="@ReloadPage">
                                🔄 Reload Page
                            </FluentButton>
                        </FluentStack>
                    </FluentStack>
                </ErrorContent>
            </ErrorBoundary>
        </Found>
    </Router>
</CascadingAuthenticationState>

@code {
    [Inject] private NavigationManager Navigation { get; set; } = default!;

    private void NavigateToHome()
    {
        Navigation.NavigateTo("/");
    }

    private void ReloadPage()
    {
        Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
    }
}
